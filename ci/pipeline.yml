resources:

  - name: resource-test-android
    type: git
    source:
      uri: git@github.com:ilshat-abdulin/cryptocurrency-browser.git
      branch: master
      private_key: |
       -----BEGIN OPENSSH PRIVATE KEY-----
       b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
       QyNTUxOQAAACDse3kp2XB42Ls0sZBldAGYZstBhaz+KWfJQnPTeTz5lgAAAKCUIthclCLY
       XAAAAAtzc2gtZWQyNTUxOQAAACDse3kp2XB42Ls0sZBldAGYZstBhaz+KWfJQnPTeTz5lg
       AAAEAGSglSgrxa2sRc+9zslqejwCd5K9hSgYxCC4bEIWnQOex7eSnZcHjYuzSxkGV0AZhm
       y0GFrP4pZ8lCc9N5PPmWAAAAGGFiZHVsaW4uaWxzaGF0QGdtYWlsLmNvbQECAwQF
       -----END OPENSSH PRIVATE KEY-----

jobs:
  - name: job-test-android
    plan:

    - get: resource-test-android
      trigger: true

    - task: "build-project"
      config:
        platform: linux
        image_resource:
            type: registry-image
            source: { repository: "androidsdk/android-31", tag: "latest" }

        inputs:
        - name: resource-test-android

        run:
          path: ./gradlew
          args:
          - 'clean'
          - 'assembleDebug'
          - '--info'
          - '--stacktrace'